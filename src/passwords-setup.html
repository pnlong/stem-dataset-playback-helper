<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Password Setup - Stem Dataset Helper</title>
  <link rel="stylesheet" href="css/styles.css">
</head>
<body>
  <div class="container container-narrow">
    <h1>Setup Passwords</h1>
    <p class="text-secondary">
      This website uses two passwords to protect your data and control access.
    </p>

    <div class="card mt-3">
      <h3>Website Password</h3>
      <p class="text-secondary" style="font-size: 0.95rem;">
        This password is required to access the website. Share this with all members of your ensemble
        who need to view songs and add stems. Anyone with the website link will need this password to enter.
      </p>
      <label>Enter Website Password</label>
      <div style="position: relative;">
        <input
          type="password"
          id="websitePassword"
          placeholder="e.g., ensemble2024"
          style="padding-right: 50px;"
        />
        <button
          type="button"
          id="toggleWebsitePassword"
          style="position: absolute; right: 10px; top: 50%; transform: translateY(-70%); background: none; border: none; cursor: pointer; font-size: 1.2rem; padding: 5px; user-select: none; display: inline-flex; align-items: center; justify-content: center; line-height: 1;"
          title="Hold to show password"
        >
          ğŸ‘ï¸
        </button>
      </div>
      <label style="margin-top: 15px;">Confirm Website Password</label>
      <div style="position: relative;">
        <input
          type="password"
          id="websitePasswordConfirm"
          placeholder="Confirm password"
          style="padding-right: 50px;"
        />
        <button
          type="button"
          id="toggleWebsitePasswordConfirm"
          style="position: absolute; right: 10px; top: 50%; transform: translateY(-70%); background: none; border: none; cursor: pointer; font-size: 1.2rem; padding: 5px; user-select: none; display: inline-flex; align-items: center; justify-content: center; line-height: 1;"
          title="Hold to show password"
        >
          ğŸ‘ï¸
        </button>
      </div>
    </div>

    <div class="card mt-3">
      <h3>Admin Password</h3>
      <p class="text-secondary" style="font-size: 0.95rem;">
        This password is required for administrative actions: adding new songs, deleting songs, deleting stems,
        and resetting all data. Only share this with trusted administrators. Keep this password secure!
      </p>
      <label>Enter Admin Password</label>
      <div style="position: relative;">
        <input
          type="password"
          id="adminPassword"
          placeholder="e.g., admin123"
          style="padding-right: 50px;"
        />
        <button
          type="button"
          id="toggleAdminPassword"
          style="position: absolute; right: 10px; top: 50%; transform: translateY(-70%); background: none; border: none; cursor: pointer; font-size: 1.2rem; padding: 5px; user-select: none; display: inline-flex; align-items: center; justify-content: center; line-height: 1;"
          title="Hold to show password"
        >
          ğŸ‘ï¸
        </button>
      </div>
      <label style="margin-top: 15px;">Confirm Admin Password</label>
      <div style="position: relative;">
        <input
          type="password"
          id="adminPasswordConfirm"
          placeholder="Confirm password"
          style="padding-right: 50px;"
        />
        <button
          type="button"
          id="toggleAdminPasswordConfirm"
          style="position: absolute; right: 10px; top: 50%; transform: translateY(-70%); background: none; border: none; cursor: pointer; font-size: 1.2rem; padding: 5px; user-select: none; display: inline-flex; align-items: center; justify-content: center; line-height: 1;"
          title="Hold to show password"
        >
          ğŸ‘ï¸
        </button>
      </div>
    </div>

    <div class="alert alert-warning mt-3">
      <strong>âš ï¸ Important:</strong> Once saved, these passwords cannot be changed through the website interface.
      To change them later, you will need to either:
      <ul style="margin-top: 10px; padding-left: 20px; margin-bottom: 0;">
        <li>Update the <code>settings</code> table directly in your Supabase database, OR</li>
        <li>Use "Reset Everything" (which deletes all data and requires the admin password)</li>
      </ul>
    </div>

    <div id="messageArea"></div>

    <div class="flex gap-2 mt-3">
      <button class="btn btn-primary" id="saveBtn" style="flex: 1;">
        Confirm and Continue
      </button>
    </div>

    <div id="loadingSpinner" class="hidden">
      <div class="spinner"></div>
      <p class="text-center">Saving passwords...</p>
    </div>
  </div>

  <script type="module" src="js/passwords-setup.js"></script>
</body>
</html>
